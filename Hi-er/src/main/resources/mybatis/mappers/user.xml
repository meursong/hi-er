<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mulcam.hier.dao.UserDAO">
	<select id="login" resultType="User" parameterType="Map">
		<![CDATA[
			SELECT * FROM user where email = #{email} and password = #{password};
		]]>
	</select>


	<select id="emailCheck" resultType="String" parameterType="String">
		<![CDATA[
			SELECT name FROM user where email = #{email}
		]]>
	</select>
<!-- <select id="selectUser" resultType="User" parameterType="String">
		<![CDATA[
			select * from user where nickname = #{nickname};
		]]>
	</select>

	<select id="getBestUserFive" resultType="User">
		<![CDATA[
			select * from user order by 인기 desc limit 5;
		]]>
	</select>
	
	<select id="getList" resultType="SelectP">
		<![CDATA[
			select product from product where category like = #{productName};
		]]>
	</select>
	 -->
</mapper>

<!--  
CREATE DATABASE if not exists `hier` /*!40100 DEFAULT CHARACTER SET utf8 */ /*!80016 DEFAULT ENCRYPTION='N' */;
DROP table if exists `image`;
DROP table if exists `portfolio_src`;
DROP table if exists `review`;
DROP table if exists `f_info`;
DROP table if exists `message`;
DROP table if exists `order1`;
DROP table if exists `report`;
DROP table if exists `likepost`;
DROP table if exists `product`;
DROP table if exists `review`;
DROP table if exists `user`;

CREATE TABLE `user`(
  `user_id` int NOT NULL AUTO_INCREMENT,
  `email` varchar(50) NOT NULL,
  `password` varchar(100) NOT NULL,
  `job` varchar(50) DEFAULT NULL,
  `name` varchar(30) NOT NULL,
  `profile_image` varchar(200) NOT NULL DEFAULT 'default.jpg',
  `type` int NOT NULL DEFAULT '0',
  `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `interest` varchar(50) DEFAULT NULL,
  `nickname` varchar(100) NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`)
);

CREATE TABLE `product` (
  `product_id` int NOT NULL AUTO_INCREMENT,
  `seller_id` int NOT NULL,
  `work_available` int NOT NULL,
  `title` varchar(200) NOT NULL,
  `category` varchar(20) NOT NULL,
  `content` varchar(1000) DEFAULT NULL,
  `commission` int NOT NULL,
  `refund_policy` varchar(500) NOT NULL,
  `createdAt` datetime NOT NULL,
  `updatedAt` datetime NOT NULL,
  PRIMARY KEY (`product_id`),
  KEY `seller_id` (`seller_id`),
  CONSTRAINT `product_ibfk_1` FOREIGN KEY (`seller_id`) REFERENCES `user` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE `review` (
  `review_id` int NOT NULL,
  `review_wid` int NOT NULL,
  `product_id` int NOT NULL,
  `seller_id` int NOT NULL,
  `content` varchar(100) NOT NULL,
  `star_point` int NOT NULL,
  PRIMARY KEY (`review_id`),
  KEY `product_id` (`product_id`),
  KEY `seller_id` (`seller_id`),
  KEY `review_wid` (`review_wid`),
  CONSTRAINT `review_ibfk_1` FOREIGN KEY (`product_id`) REFERENCES `product` (`product_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `review_ibfk_2` FOREIGN KEY (`seller_id`) REFERENCES `product` (`seller_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `review_ibfk_3` FOREIGN KEY (`review_wid`) REFERENCES `user` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO `user` (`email`,`password`,`job`,`name`,`profile_image`,`type`,`createdAt`,`updatedAt`,`interest`,`nickname`) VALUES ('yyc5343@naver.com','1234','직장인','예찬','default.jpg',0,'2022-04-08 09:28:24','2022-04-08 09:28:24',NULL,'0');

INSERT INTO `product` (`product_id`,`seller_id`,`work_available`,`title`,`category`,`content`,`commission`,`refund_policy`,`createdAt`,`updatedAt`) VALUES (1,1,5,'홈페이지 제작','웹 프로그래밍','홈페이지를만들어드립니다',200,'5일이내 환불','2022-03-30 23:59:59','2022-04-05 23:58:58');
INSERT INTO `product` (`product_id`,`seller_id`,`work_available`,`title`,`category`,`content`,`commission`,`refund_policy`,`createdAt`,`updatedAt`) VALUES (2,1,3,'로고 제작','디자인','로고 제작 해드립니다',1200,'5일이내 환불','2022-03-30 23:59:59','2022-04-05 23:58:58');
INSERT INTO `product` (`product_id`,`seller_id`,`work_available`,`title`,`category`,`content`,`commission`,`refund_policy`,`createdAt`,`updatedAt`) VALUES (3,1,2,'영상 제작','영상','영상 제작 해드립니다',300,'5일이내 환불','2022-03-30 23:59:59','2022-04-05 23:58:58');
INSERT INTO `product` (`product_id`,`seller_id`,`work_available`,`title`,`category`,`content`,`commission`,`refund_policy`,`createdAt`,`updatedAt`) VALUES (4,1,4,'영상 편집','영상','영상 편집 해드립니다',400,'5일이내 환불','2022-03-30 23:59:59','2022-04-05 23:58:58');
INSERT INTO `product` (`product_id`,`seller_id`,`work_available`,`title`,`category`,`content`,`commission`,`refund_policy`,`createdAt`,`updatedAt`) VALUES (5,1,1,'보안 프로그래밍','프로그래밍','보안 프로그래밍 제작해드립니다',1400,'5일이내 환불','2022-03-30 23:59:59','2022-04-05 23:58:58');
INSERT INTO `product` (`product_id`,`seller_id`,`work_available`,`title`,`category`,`content`,`commission`,`refund_policy`,`createdAt`,`updatedAt`) VALUES (6,1,4,'브랜드 제작','디자인','브랜드 제작 해드립니다',2200,'5일이내 환불','2022-03-30 23:59:59','2022-04-05 23:58:58');

 -->
