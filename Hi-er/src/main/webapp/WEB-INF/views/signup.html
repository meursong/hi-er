<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Gurdeep singh osahan">
<meta name="author" content="Gurdeep singh osahan">
<title>회원 가입</title>
<!-- Favicon Icon -->
<link rel="icon" type="image/png" th:href="@{images/titlelogo.ico}">
<!-- Bootstrap core CSS -->
<link th:href="@{vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
<!-- Font Awesome--> 
<link th:href="@{vendor/fontawesome/css/font-awesome.min.css}"
	rel="stylesheet">
<!-- Material Design Icons -->
<link th:href="@{vendor/icons/css/materialdesignicons.min.css}" media="all"
	rel="stylesheet" type="text/css">
<!-- Slick -->
<link th:href="@{vendor/slick-master/slick/slick.css}" rel="stylesheet"
	type="text/css">
<!-- Lightgallery -->
<link th:href="@{vendor/lightgallery-master/dist/css/lightgallery.min.css}"
	rel="stylesheet">
<!-- Select2 CSS -->
<link th:href="@{vendor/select2/css/select2-bootstrap.css}" />
<link th:href="@{vendor/select2/css/select2.min.css}" rel="stylesheet">
<!-- Custom styles for this template -->
<link th:href="@{css/style.css}" rel="stylesheet">
</head>
<body>
	<!-- Register -->
	<div class="bg-white">
		<div class="container">
			<div
				class="row justify-content-center align-items-center d-flex vh-100">
				<div class="col-lg-4 mx-auto">
					<div class="osahan-login py-4">
						<div class="text-center mb-4">
							<a th:href="@{/}"><img th:src="@{images/titlelogo.ico}" alt=""></a>
							<h5 class="font-weight-bold mt-3" th:text="${errMsg} ? ${errMsg} : '회원가입'"></h5>
						</div>
						<form method="post" th:action="@{/signup}"  oninput='password2.setCustomValidity(password2.value != password.value ? "비밀번호가 달라요~~" : "")'>
							<div class="form-group">
								<label class="mb-1">이름</label>
								<div class="position-relative icon-form-control">
									<i class="mdi mdi-account position-absolute"></i> <input
										type="text" id="name" name="name" class="form-control" required>
								</div>
								<div id="checkname"></div>
							</div>

							<div class="form-group">
								<label class="mb-1">이메일</label>
								<div class="position-relative icon-form-control">
									<i class="mdi mdi-email-outline position-absolute"></i> <input
										type="email" id="email" name="email" class="form-control" required>
								</div>
								<div id="checkemail"></div>
							</div>
							
							<div class="form-group">
								<label class="mb-1">닉네임</label>
								<div class="position-relative icon-form-control">
									<i class="mdi mdi-email-outline position-absolute"></i> <input
										type="text" id="nickname" name="nickname" class="form-control" required>
								</div>
								<div id="checknickname"></div>
							</div>

							<div class="form-group">
								<label class="mb-1">비밀번호</label>
								<div class="position-relative icon-form-control">
									<i class="mdi mdi-key-variant position-absolute"></i> <input
										type="password" id="password" name="password"
										class="form-control" required>
								</div>
							</div>

							<div class="form-group">
								<label class="mb-1">비밀번호 확인</label>
								<div class="position-relative icon-form-control">
									<i class="mdi mdi-key-variant position-absolute"></i> <input
										type="password" id="password2" class="form-control" required>
								</div>
								<div id="checkpassword"></div>
							</div>

							<div class="form-group">
								<label class="mb-1">직업</label> <select name="job"
									class="form-control form-control-lg" required>
									<option selected value="" disabled>직업을 선택해 주세요.</option>
									<option value="프리랜서">프리랜서</option>
									<option value="직장인">직장인</option>
									<option value="소상공인">소상공인</option>
									<option value="스타트업">스타트업</option>
									<option value="대학생">대학(원)생</option>
									<option value="취준생">취업준비생</option>
								</select>
							</div>

							<div class="form-group">
								<label class="mb-1">관심분야</label> <select name="interest"
									class="form-control form-control-lg" required>
									<option selected value="" disabled>관심분야를 선택해 주세요.</option>
									<option value="디자인">디자인</option>
									<option value="IT∙프로그래밍">IT∙프로그래밍</option>
									<option value="영상∙사진∙음향">영상∙사진∙음향</option>
									<option value="마케팅">마케팅</option>
									<option value="번역∙통역">번역∙통역</option>
									<option value="문서∙글쓰기">문서∙글쓰기</option>
								</select>
							</div>

							</select>
							<!-- 약관 넣어주는자리 -->
							<!--  <div class="form-group">
                           <label class="mb-1">You agree to the Maer <a href="#">User Agreement</a>, <a href="#">Privacy Policy</a>, and <a  href="#">Cookie Policy</a>.</label>
                        </div> -->
							<button class="btn btn-success btn-block text-uppercase" id="signUpBtn"
								type="submit">가입하기</button>
							<div class="text-center mt-3 border-bottom pb-3">
								<p class="small text-muted">Or login with</p>
								<div class="row">
									<div class="col-6">
										<button type="button"
											class="btn btn-outline-instagram btn-block">
											<i class="mdi mdi-instagram"></i> Instagram
										</button>
									</div>
									<div class="col-6">
										<button type="button"
											class="btn btn-outline-facebook btn-block">
											<i class="mdi mdi-facebook"></i> Facebook
										</button>
									</div>
								</div>
							</div>
							<div class="py-3 d-flex align-item-center">
								 <span
									class="ml-auto"> 이미 계정이 있나요? <a th:href="@{/login}">로그인
									</a></span>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- End Register -->
	<!-- Bootstrap core JavaScript -->
	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!-- Contact form JavaScript -->
	<!-- Slick -->
	<script src="vendor/slick-master/slick/slick.js" type="text/javascript"
		charset="utf-8"></script>
	<!-- lightgallery -->
	<script
		src="vendor/lightgallery-master/dist/js/lightgallery-all.min.js"></script>
	<!-- select2 Js -->
	<script src="vendor/select2/js/select2.min.js"></script>
	<!-- Custom -->
	<script src="js/custom.js"></script>
	<script>
	/*	
	$(document).ready(function() {
			$('#signUpBtn').on('click', function(e) {
				if($('#password').val() != $('#password2').val()) {
					alert('달라');
					e.preventDefault();
				}
			})
		})
	*/
	</script>
	<script>

		$('#name').focusout(function(){
			let name = $('#name').val();
			if(name =='') {
				$("#checkname").html('이름을 입력해주세요');
				$("#checkname").css('color','red');
				return
			}
			$("#checkname").html('이름이 입력되었습니다');
			$("#checkname").css('color','green');

		})
	
	
	$('#password').focusout(function(){
		let password1 = $('#password').val();
		if(password1 == "") {
			$("#checkpassword").html('비밀번호를 입력하세요.');
			$("#checkpassword").css('color','red');
			$('#signUpBtn').text('비밀번호를 입력하세요!!');
			$('#signUpBtn').attr('disabled', true);
		} else if (password1.length < 8 || password1.length > 20) {
			$("#checkpassword").html('8자리 ~ 20자리 이내로 입력해주세요..');
			$("#checkpassword").css('color','red');
			$('#signUpBtn').text('8자리 ~ 20자리 이내로 입력해주세요.!');
			$('#signUpBtn').attr('disabled', true);
		} else if (password1.search(/\s/) != -1) {
			$("#checkpassword").html('비밀번호는 공백 없이 입력해주세요.');
			$("#checkpassword").css('color','red');
			$('#signUpBtn').text('비밀번호는 공백 없이 입력해주세요..!');
			$('#signUpBtn').attr('disabled', true);
		} else {
			$("#checkpassword").html('사용 가능한 비밀번호입니다.');
			$("#checkpassword").css('color','green');
			$('#signUpBtn').text('가입하기');
			$('#signUpBtn').attr('disabled', false);
		}
	})
	$('#password2').focusout(function(){
		let password1 = $('#password').val();
		let password2 = $('#password2').val();

		if (password1 != password2) {
			$("#checkpassword").html('두 비밀번호가 틀립니다.');
			$("#checkpassword").css('color','red');
			$('#signUpBtn').text('두 비밀번호가 틀려!!');
			$('#signUpBtn').attr('disabled', true);
		} else {
			$("#checkpassword").html('두 비밀번호가 같습니다.');
			$("#checkpassword").css('color','green');
			$('#signUpBtn').text('가입하기');
			$('#signUpBtn').attr('disabled', false);
		}
	})



	$('#email').focusout(function(){
		let useremail = $('#email').val();
		
		$.ajax({
			url : "/emailcheck",
			type : "post",
			data : {"useremail": useremail},
			dataType : 'json',
			success : function(result){

				if(useremail =='') {
					$("#checkemail").html('이메일을 입력해주세요');
					$("#checkemail").css('color','red');
					return
				}

				if(result){
					$("#checkemail").html('사용할 수 있는 이메일입니다.');
					$("#checkemail").css('color','green');
					$('#signUpBtn').text('가입하기');
					$('#signUpBtn').attr('disabled', false);
				} else{
					$("#checkemail").html('중복된 이메일입니다.');
					$("#checkemail").css('color','red');
					$('#signUpBtn').text('사용할 수 없는 이메일이라잖아!!!');
					$('#signUpBtn').attr('disabled', true);
				}
			},
			error : function(){
				alert("서버요청실패");
			}
		})
	})
	</script>
	<script>
	$('#nickname').focusout(function(){
		let usernickname = $('#nickname').val();
		
		$.ajax({
			url : "/nicknamecheck",
			type : "post",
			data : {"usernickname": usernickname},
			dataType : 'json',
			success : function(result){

					if(usernickname =='') {
						$("#checknickname").html('닉네임을 입력해주세요');
						$("#checknickname").css('color','red');
						return
					}

				if(result){
					$("#checknickname").html('사용할 수 있는 닉네임입니다.');
					$("#checknickname").css('color','green');
					$('#signUpBtn').text('가입하기');
					$('#signUpBtn').attr('disabled', false);
				} else{
					$("#checknickname").html('사용할 수 없는 닉네임입니다.');
					$("#checknickname").css('color','red');
					$('#signUpBtn').text('사용할 수 없는 닉네임이라잖아!!!');
					$('#signUpBtn').attr('disabled', true);
				}
			},
			error : function(){
				alert("서버요청실패");
			}
		})
	})
	</script>
	
</body>
</html>